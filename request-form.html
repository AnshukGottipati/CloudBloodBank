<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Bank System - Blood Request Form</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="mockup">
        <div class="mockup-header">
            Blood Bank System
        </div>
        <div class="mockup-nav">
            <a href="dashboard.html">Dashboard</a>
            <a href="inventory.html" class="active">Blood Inventory</a>
            <a href="donors.html">Donors</a>
            <a href="blood-banks.html">Blood Banks</a>
            <a href="reports.html">Reports</a>
            <a href="#" id="logout-btn" style="float: right;">Logout</a>
            <a href="profile.html" style="float: right; margin-right: 5px;">Profile</a>
        </div>
        <div class="mockup-content">
            <h2>Blood Request Form</h2>
            <p>Use this form to submit a request for blood units from inventory.</p>
            
            <div class="login-form" style="max-width: 600px;">
                <form id="request-form">
                    <div class="form-group">
                        <label for="request-hospital">Requesting Hospital/Facility</label>
                        <input type="text" id="request-hospital" placeholder="Enter hospital or facility name" required>
                    </div>
                    <div class="form-group">
                        <label for="request-doctor">Requesting Physician</label>
                        <input type="text" id="request-doctor" placeholder="Enter requesting physician name" required>
                    </div>
                    <div class="form-group">
                        <label for="request-patient">Patient ID (optional)</label>
                        <input type="text" id="request-patient" placeholder="Enter patient ID if available">
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 1;">
                            <label for="request-blood-type">Blood Type Needed</label>
                            <select id="request-blood-type" required>
                                <option value="">Select blood type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="request-units">Units Required</label>
                            <input type="number" id="request-units" min="1" value="1" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="request-priority">Priority Level</label>
                        <select id="request-priority" required>
                            <option value="routine">Routine</option>
                            <option value="urgent">Urgent</option>
                            <option value="emergency">Emergency</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="request-date">Required By Date/Time</label>
                        <input type="datetime-local" id="request-date" required>
                    </div>
                    <div class="form-group">
                        <label for="request-notes">Additional Notes</label>
                        <textarea id="request-notes" rows="4" placeholder="Enter any additional information..."></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn">Submit Request</button>
                        <a href="inventory.html" class="btn-outline">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
        <div class="mockup-footer">
            Â© 2025 Blood Bank System
        </div>
    </div>

    <script>
        // Check if user is logged in
        document.addEventListener('DOMContentLoaded', function() {
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (!loggedInUser) {
                // Redirect to login if not logged in
                window.location.href = 'login.html';
            }
            
            // Handle logout
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                sessionStorage.removeItem('loggedInUser');
                sessionStorage.removeItem('userRole');
                window.location.href = 'login.html';
            });
            
            // Set default date/time for request (24 hours from now)
            const now = new Date();
            now.setDate(now.getDate() + 1);
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hour = String(now.getHours()).padStart(2, '0');
            const minute = String(now.getMinutes()).padStart(2, '0');
            
            const dateTimeValue = `${year}-${month}-${day}T${hour}:${minute}`;
            document.getElementById('request-date').value = dateTimeValue;
        });

        // Handle form submission
        document.getElementById('request-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const hospital = document.getElementById('request-hospital').value;
            const bloodType = document.getElementById('request-blood-type').value;
            const units = document.getElementById('request-units').value;
            const priority = document.getElementById('request-priority').value;
            
            // In a real app, this would send data to a server
            // For this demo, we'll just show a confirmation message
            
            let priorityText = '';
            switch(priority) {
                case 'routine':
                    priorityText = 'Routine';
                    break;
                case 'urgent':
                    priorityText = 'Urgent';
                    break;
                case 'emergency':
                    priorityText = 'Emergency';
                    break;
            }
            
            alert(`Blood Request Submitted\n\nRequesting: ${units} units of ${bloodType}\nFor: ${hospital}\nPriority: ${priorityText}\n\nYour request has been logged and will be processed according to priority level.`);
            
            // Redirect back to inventory
            window.location.href = 'inventory.html';
        });
    </script>
</body>
</html>