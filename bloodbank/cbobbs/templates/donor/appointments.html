{% extends "donor/base.html" %} 
{% block title %} CBOBBS - Appointments{% endblock %}
{% block header %} CBOBBS - Appointments{% endblock %}
{% block content %} 
<div class="page-header">
    <h1>My Appointments</h1>
    <p>Manage your upcoming blood donation appointments.</p>
</div>

{% if appointments %}
    <h2>Appointment History</h2>
    <div class="appointment-grid">
        {% for appt in appointments %}
            <div class="appointment-card">
                <div class="appointment-card-title">Whole Blood Donation</div>
                <div class="appointment-card-date">
                    {{ appt.appt_date|date:"F j, Y" }} - {{ appt.appt_time|time:"g:i A" }}
                </div>
                <div class="appointment-card-location">
                    {{ appt.blood_bank.name }}, {{ appt.blood_bank.address }}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="no-appointments">
        <h2>You don't have any upcoming appointments</h2>
        <p>Schedule your next blood donation appointment to help save lives.</p>
    </div>
{% endif %}

<h2 style="margin-top: 40px;">Schedule a New Appointment</h2>
<form method="post" class="appointment-form">
    {% csrf_token %}
    <label for="appt_date">Date:</label>
    <input type="date" id="appt_date" name="appt_date" required>

    <label for="appt_time">Time:</label>
    <input type="time" id="appt_time" name="appt_time" required>

    <label for="blood_bank_id">Blood Bank:</label>
    <select name="blood_bank_id" id="blood_bank_id" required>
        {% for bank in blood_banks %}
            <option value="{{ bank.bb_id }}">{{ bank.name }}</option>
        {% endfor %}
    </select>

    <button type="submit" class="btn">Add Appointment</button>
</form>


{% endblock %}
